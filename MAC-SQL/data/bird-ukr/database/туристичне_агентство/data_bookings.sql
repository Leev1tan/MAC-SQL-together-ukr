-- Дані про бронювання турів для бази даних "Туристичне агентство"

-- Налаштування кодування
SET client_encoding = 'UTF8';

-- Очищення таблиці перед додаванням даних
TRUNCATE TABLE бронювання_турів CASCADE;

-- Додавання бронювань
-- Змінено цільову таблицю на бронювання_турів.
-- Змінено статус на статус_id (з підзапитом).
-- Змінено тур_id на підзапит по назві туру.
-- Видалено дата_оплати, спосіб_оплати.
-- Видалено загальна_вартість (розраховується тригером).
-- Додано знижка_id, дата_підтвердження (як NULL).
-- Встановлено працівник_id = NULL.
INSERT INTO бронювання_турів (клієнт_id, тур_id, дата_бронювання, кількість_осіб, статус_id, працівник_id, примітки, знижка_id, дата_підтвердження) VALUES
-- Українські клієнти
(1, (SELECT id FROM тури WHERE назва = 'Культурний Київ'), '2023-03-10 10:00:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Оплачено повністю'), NULL, 'Потрібен трансфер з аеропорту', NULL, '2023-03-15 11:00:00'),
-- (2, (SELECT id FROM тури WHERE назва = 'SPA-вікенд в Карпатах'), '2023-02-20 11:30:00', 1, (SELECT id FROM статуси_бронювання WHERE назва = 'Оплачено повністю'), NULL, 'Клієнт запитав номер з виглядом на гори', NULL, '2023-02-22 12:00:00'), -- Tour likely commented out in data_tours.sql
(3, (SELECT id FROM тури WHERE назва = 'Одеський бриз'), '2023-05-15 14:00:00', 3, (SELECT id FROM статуси_бронювання WHERE назва = 'Оплачено повністю'), NULL, 'Потрібен номер для некурців', NULL, '2023-05-20 15:00:00'),
(4, (SELECT id FROM тури WHERE назва = 'Вихідні у Львові'), '2023-03-01 09:00:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Оплачено повністю'), NULL, 'Клієнти святкують річницю весілля', NULL, '2023-03-05 10:00:00'),
(5, (SELECT id FROM тури WHERE назва = 'Замки Західної України'), '2023-04-12 16:00:00', 4, (SELECT id FROM статуси_бронювання WHERE назва = 'Оплачено повністю'), NULL, 'Потрібні два суміжні номери', NULL, '2023-04-15 17:00:00'),
(6, (SELECT id FROM тури WHERE назва = 'Казкова Каппадокія'), '2023-03-25 10:30:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Оплачено повністю'), NULL, 'Клієнт цікавиться додатковими екскурсіями', NULL, '2023-03-28 11:30:00'),
(7, (SELECT id FROM тури WHERE назва = 'Курорти Хургади'), '2023-08-15 12:00:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Оплачено повністю'), NULL, 'Потрібен трансфер з аеропорту', NULL, '2023-08-18 13:00:00'),
(8, (SELECT id FROM тури WHERE назва = 'Історичний Стамбул'), '2023-07-10 15:00:00', 1, (SELECT id FROM статуси_бронювання WHERE назва = 'Оплачено повністю'), NULL, 'Клієнт попросив забезпечити гіда, що розмовляє українською', NULL, '2023-07-12 16:00:00'),
(9, (SELECT id FROM тури WHERE назва = 'Піраміди та пляжі'), '2023-09-05 09:30:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Оплачено повністю'), NULL, 'Клієнти хочуть забронювати додаткові дайвінг-сесії', NULL, '2023-09-08 10:30:00'),
(10, (SELECT id FROM тури WHERE назва = 'Романтичний Санторіні'), '2023-04-20 11:00:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Оплачено повністю'), NULL, 'Клієнти замовили романтичну вечерю на заході сонця', NULL, '2023-04-22 12:30:00'),

-- Бронювання зі статусом "Підтверджено"
(11, (SELECT id FROM тури WHERE назва = 'Сонячна Анталія'), '2023-05-05 10:00:00', 3, (SELECT id FROM статуси_бронювання WHERE назва = 'Підтверджено'), NULL, 'Чекаємо на внесення завдатку', NULL, '2023-05-06 11:00:00'),
(12, (SELECT id FROM тури WHERE назва = 'Круїз по Нілу'), '2023-08-25 14:30:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Підтверджено'), NULL, 'Клієнти поцікавились можливістю пізнього виїзду', NULL, '2023-08-26 15:00:00'),
(13, (SELECT id FROM тури WHERE назва = 'Бангкок і Паттайя'), '2023-01-15 16:00:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Підтверджено'), NULL, 'Клієнт запросив інформацію про візові вимоги', NULL, '2023-01-16 17:00:00'),
(14, (SELECT id FROM тури WHERE назва = 'Арабська казка'), '2023-02-01 09:00:00', 4, (SELECT id FROM статуси_бронювання WHERE назва = 'Підтверджено'), NULL, 'Велика родина, потрібні додаткові ліжка', NULL, '2023-02-02 10:00:00'),
(15, (SELECT id FROM тури WHERE назва = 'Розкішний Дубай'), '2023-07-18 11:00:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Підтверджено'), NULL, 'Клієнти цікавились екскурсіями на джипах у пустелі', NULL, '2023-07-19 12:00:00'),

-- Іноземні клієнти
(21, (SELECT id FROM тури WHERE назва = 'Одеський бриз'), '2023-06-10 10:00:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Оплачено повністю'), NULL, 'Клієнти хочуть відвідати Одеську оперу', NULL, '2023-06-12 11:00:00'),
(22, (SELECT id FROM тури WHERE назва = 'Культурний Київ'), '2023-04-15 12:30:00', 1, (SELECT id FROM статуси_бронювання WHERE назва = 'Оплачено повністю'), NULL, 'Потрібен англомовний гід', NULL, '2023-04-17 13:30:00'),
(23, (SELECT id FROM тури WHERE назва = 'Вихідні у Львові'), '2023-03-20 15:00:00', 3, (SELECT id FROM статуси_бронювання WHERE назва = 'Оплачено повністю'), NULL, 'Клієнт запитує про традиційні українські ресторани', NULL, '2023-03-22 16:00:00'),
(24, (SELECT id FROM тури WHERE назва = 'Замки Західної України'), '2023-05-25 09:30:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Оплачено повністю'), NULL, 'Клієнти цікавляться історією українських замків', NULL, '2023-05-28 10:30:00'),
-- (25, (SELECT id FROM тури WHERE назва = 'SPA-вікенд в Карпатах'), '2023-04-02 11:30:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Оплачено повністю'), NULL, 'Потрібні послуги перекладача', NULL, '2023-04-05 12:30:00'), -- Tour likely commented out

-- Бронювання зі статусом "Очікування підтвердження"
(26, (SELECT id FROM тури WHERE назва = 'Бодрум: перлина Егейського моря'), '2023-09-15 10:00:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Очікування підтвердження'), NULL, 'Очікуємо підтвердження наявності місць', NULL, NULL),
(27, (SELECT id FROM тури WHERE назва = 'Дайвінг у Шарм-ель-Шейху'), '2023-10-05 14:00:00', 3, (SELECT id FROM статуси_бронювання WHERE назва = 'Очікування підтвердження'), NULL, 'Клієнт хоче уточнити деталі включених екскурсій', NULL, NULL),
(28, (SELECT id FROM тури WHERE назва = 'Острівна Греція'), '2023-09-10 16:30:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Очікування підтвердження'), NULL, 'Потрібна допомога з отриманням візи', NULL, NULL),
(29, (SELECT id FROM тури WHERE назва = 'Олімпійська Греція'), '2023-07-20 09:00:00', 4, (SELECT id FROM статуси_бронювання WHERE назва = 'Очікування підтвердження'), NULL, 'Клієнт запитує про можливість змінити дати поїздки', NULL, NULL),
(30, (SELECT id FROM тури WHERE назва = 'Екзотичний Самуї'), '2023-08-01 11:00:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Очікування підтвердження'), NULL, 'Потрібні деталі щодо заходів безпеки під час пандемії', NULL, NULL),

-- Бронювання зі статусом "Відмінено клієнтом"
(16, (SELECT id FROM тури WHERE назва = 'Афінські хроніки'), '2023-09-25 10:00:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Відмінено клієнтом'), NULL, 'Клієнт скасував через особисті обставини', NULL, '2023-09-26 11:00:00'),
(17, (SELECT id FROM тури WHERE назва = 'Тропічний рай Пхукету'), '2023-05-10 12:00:00', 1, (SELECT id FROM статуси_бронювання WHERE назва = 'Відмінено клієнтом'), NULL, 'Клієнт не зміг отримати відпустку на роботі', NULL, '2023-05-11 13:00:00'),
(18, (SELECT id FROM тури WHERE назва = 'Північний Таїланд'), '2023-03-15 15:30:00', 3, (SELECT id FROM статуси_бронювання WHERE назва = 'Відмінено клієнтом'), NULL, 'Скасовано через зміну планів клієнта', NULL, '2023-03-16 16:30:00'),
(19, (SELECT id FROM тури WHERE назва = 'Сімейний відпочинок в Абу-Дабі'), '2023-06-20 09:00:00', 2, (SELECT id FROM статуси_бронювання WHERE назва = 'Відмінено клієнтом'), NULL, 'Клієнт скасував через медичні причини', NULL, '2023-06-21 10:00:00'),
(20, (SELECT id FROM тури WHERE назва = 'Пустельне сафарі в ОАЕ'), '2023-04-25 11:00:00', 1, (SELECT id FROM статуси_бронювання WHERE назва = 'Відмінено клієнтом'), NULL, 'Клієнт знайшов інший варіант туру', NULL, '2023-04-26 12:00:00');

-- Оновлення послідовності ID
SELECT setval('бронювання_турів_id_seq', (SELECT MAX(id) FROM бронювання_турів));

-- Інформаційне повідомлення про успішне завершення імпорту
DO $$
BEGIN
    RAISE NOTICE 'Дані про бронювання турів успішно імпортовано. Загальна кількість записів: %', (SELECT COUNT(*) FROM бронювання_турів);
END $$; 