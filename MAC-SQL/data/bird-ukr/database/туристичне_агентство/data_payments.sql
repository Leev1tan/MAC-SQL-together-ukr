-- Дані про платежі для бази даних "Туристичне агентство"

-- Налаштування кодування
SET client_encoding = 'UTF8';

-- Очищення таблиці перед додаванням даних
TRUNCATE TABLE платежі CASCADE;

-- Додавання платежів
INSERT INTO платежі (бронювання_тур_id, бронювання_готель_id, бронювання_транспорт_id, сума, дата_платежу, метод_оплати_id, статус, номер_транзакції, примітки, працівник_id) VALUES
-- Платежі для бронювань зі статусом "Оплачено"
((SELECT id FROM бронювання_турів WHERE клієнт_id = 1 AND тур_id = (SELECT id FROM тури WHERE назва = 'Культурний Київ')), NULL, NULL, 11600, '2023-03-15 11:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Успішно', 'TR23031501', 'Оплата кредитною карткою Visa', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 3 AND тур_id = (SELECT id FROM тури WHERE назва = 'Одеський бриз')), NULL, NULL, 22500, '2023-05-20 15:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Успішно', 'TR23052001', 'Оплата кредитною карткою MasterCard', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 4 AND тур_id = (SELECT id FROM тури WHERE назва = 'Вихідні у Львові')), NULL, NULL, 7000, '2023-03-05 10:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Готівка'), 'Успішно', 'TR23030501', 'Оплата готівкою в офісі', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 5 AND тур_id = (SELECT id FROM тури WHERE назва = 'Замки Західної України')), NULL, NULL, 48000, '2023-04-15 17:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківський переказ'), 'Успішно', 'TR23041501', 'Банківський переказ з Ощадбанку', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 6 AND тур_id = (SELECT id FROM тури WHERE назва = 'Казкова Каппадокія')), NULL, NULL, 50000, '2023-03-28 11:30:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Успішно', 'TR23032801', 'Оплата кредитною карткою American Express', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 7 AND тур_id = (SELECT id FROM тури WHERE назва = 'Курорти Хургади')), NULL, NULL, 49000, '2023-08-18 13:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківський переказ'), 'Успішно', 'TR23081801', 'Банківський переказ з Укрсиббанку', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 8 AND тур_id = (SELECT id FROM тури WHERE назва = 'Історичний Стамбул')), NULL, NULL, 18500, '2023-07-12 16:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Успішно', 'TR23071201', 'Оплата кредитною карткою Visa', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 9 AND тур_id = (SELECT id FROM тури WHERE назва = 'Піраміди та пляжі')), NULL, NULL, 49000, '2023-09-08 10:30:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківський переказ'), 'Успішно', 'TR23090801', 'Банківський переказ з Райффайзен Банку', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 10 AND тур_id = (SELECT id FROM тури WHERE назва = 'Романтичний Санторіні')), NULL, NULL, 70000, '2023-04-22 12:30:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Успішно', 'TR23042201', 'Оплата кредитною карткою MasterCard', NULL),

-- Оплати іноземних клієнтів
((SELECT id FROM бронювання_турів WHERE клієнт_id = 21 AND тур_id = (SELECT id FROM тури WHERE назва = 'Одеський бриз')), NULL, NULL, 15000, '2023-06-12 11:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Успішно', 'TR23061201', 'Оплата кредитною карткою Visa', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 22 AND тур_id = (SELECT id FROM тури WHERE назва = 'Культурний Київ')), NULL, NULL, 5800, '2023-04-17 13:30:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківський переказ'), 'Успішно', 'TR23041701', 'Банківський переказ з Bank of America', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 23 AND тур_id = (SELECT id FROM тури WHERE назва = 'Вихідні у Львові')), NULL, NULL, 10500, '2023-03-22 16:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Успішно', 'TR23032201', 'Оплата кредитною карткою MasterCard', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 24 AND тур_id = (SELECT id FROM тури WHERE назва = 'Замки Західної України')), NULL, NULL, 24000, '2023-05-28 10:30:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківський переказ'), 'Успішно', 'TR23052801', 'Банківський переказ з Deutsche Bank', NULL),

-- Попередні платежі (завдатки) для бронювань зі статусом "Підтверджено"
((SELECT id FROM бронювання_турів WHERE клієнт_id = 11 AND тур_id = (SELECT id FROM тури WHERE назва = 'Сонячна Анталія')), NULL, NULL, 20000, '2023-05-08 10:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Успішно', 'TR23050801', 'Завдаток 30% від загальної вартості', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 12 AND тур_id = (SELECT id FROM тури WHERE назва = 'Круїз по Нілу')), NULL, NULL, 16000, '2023-08-28 14:30:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківський переказ'), 'Успішно', 'TR23082801', 'Завдаток 30% від загальної вартості', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 13 AND тур_id = (SELECT id FROM тури WHERE назва = 'Бангкок і Паттайя')), NULL, NULL, 25000, '2023-01-18 16:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Успішно', 'TR23011801', 'Завдаток 30% від загальної вартості', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 14 AND тур_id = (SELECT id FROM тури WHERE назва = 'Арабська казка')), NULL, NULL, 100000, '2023-02-03 09:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківський переказ'), 'Успішно', 'TR23020301', 'Завдаток 30% від загальної вартості', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 15 AND тур_id = (SELECT id FROM тури WHERE назва = 'Розкішний Дубай')), NULL, NULL, 30000, '2023-07-20 11:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Успішно', 'TR23072001', 'Завдаток 30% від загальної вартості', NULL),

-- Платежі для скасованих бронювань (з поверненням коштів)
((SELECT id FROM бронювання_турів WHERE клієнт_id = 16 AND тур_id = (SELECT id FROM тури WHERE назва = 'Афінські хроніки')), NULL, NULL, 10000, '2023-09-26 11:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківський переказ'), 'Повернуто', 'TR23092601', 'Завдаток 30% повернуто', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 17 AND тур_id = (SELECT id FROM тури WHERE назва = 'Тропічний рай Пхукету')), NULL, NULL, 12000, '2023-05-11 13:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Повернуто', 'TR23051101', 'Завдаток 30% повернуто', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 18 AND тур_id = (SELECT id FROM тури WHERE назва = 'Північний Таїланд')), NULL, NULL, 35000, '2023-03-16 16:30:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківський переказ'), 'Повернуто', 'TR23031601', 'Завдаток 30% повернуто', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 19 AND тур_id = (SELECT id FROM тури WHERE назва = 'Сімейний відпочинок в Абу-Дабі')), NULL, NULL, 15000, '2023-06-21 10:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Повернуто', 'TR23062101', 'Завдаток 30% повернуто', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 20 AND тур_id = (SELECT id FROM тури WHERE назва = 'Пустельне сафарі в ОАЕ')), NULL, NULL, 25000, '2023-04-26 12:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківський переказ'), 'Повернуто', 'TR23042601', 'Завдаток 30% повернуто', NULL),

-- Повторні та додаткові платежі
((SELECT id FROM бронювання_турів WHERE клієнт_id = 1 AND тур_id = (SELECT id FROM тури WHERE назва = 'Культурний Київ')), NULL, NULL, 2000, '2023-03-18 14:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Успішно', 'TR23031802', 'Оплата за додатковий трансфер', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 3 AND тур_id = (SELECT id FROM тури WHERE назва = 'Одеський бриз')), NULL, NULL, 3500, '2023-05-25 10:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Успішно', 'TR23052502', 'Оплата за додаткову екскурсію', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 6 AND тур_id = (SELECT id FROM тури WHERE назва = 'Казкова Каппадокія')), NULL, NULL, 4500, '2023-03-30 15:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Успішно', 'TR23033002', 'Оплата за VIP-екскурсію', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 9 AND тур_id = (SELECT id FROM тури WHERE назва = 'Піраміди та пляжі')), NULL, NULL, 6000, '2023-09-12 11:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківський переказ'), 'Успішно', 'TR23091202', 'Оплата за додаткові дайвінг-сесії', NULL),
((SELECT id FROM бронювання_турів WHERE клієнт_id = 10 AND тур_id = (SELECT id FROM тури WHERE назва = 'Романтичний Санторіні')), NULL, NULL, 5500, '2023-04-25 13:00:00', (SELECT id FROM методи_оплати WHERE назва = 'Банківська картка'), 'Успішно', 'TR23042502', 'Оплата за романтичну вечерю', NULL);

-- Оновлення послідовності ID
SELECT setval('платежі_id_seq', (SELECT MAX(id) FROM платежі));

-- Інформаційне повідомлення про успішне завершення імпорту
DO $$
BEGIN
    RAISE NOTICE 'Дані про платежі успішно імпортовано. Загальна кількість записів: %', (SELECT COUNT(*) FROM платежі);
END $$; 