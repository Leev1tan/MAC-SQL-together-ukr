# Шаблони питань для BIRD-UKR бенчмарку

Цей документ містить приклади шаблонів питань різних рівнів складності для кожної бази даних. Використовуйте ці шаблони для розробки повного набору питань.

## Загальні принципи формування питань

1. **Природність** - питання повинні бути сформульовані природною українською мовою
2. **Конкретність** - питання мають чітко визначати, яку інформацію потрібно отримати
3. **Однозначність** - питання не повинні допускати різних інтерпретацій
4. **Різноманітність** - використовуйте різні форми запитань (хто, що, коли, де, скільки, тощо)

## Приклади питань для бази "Спортивний клуб"

### Простий рівень (вибірка з однієї таблиці, прості умови)

1. **Шаблон**: "Знайти [інформацію] для [умова]"
   - Приклад: "Знайти всіх тренерів, які працюють у клубі більше 5 років"
   - SQL:
   ```sql
   SELECT прізвище, ім'я, стаж 
   FROM тренери 
   WHERE стаж > 5
   ```

2. **Шаблон**: "Показати [інформацію] відсортовану за [критерій]"
   - Приклад: "Показати всі групові заняття, відсортовані за часом початку"
   - SQL:
   ```sql
   SELECT назва, час_початку, час_закінчення 
   FROM групові_заняття 
   ORDER BY час_початку
   ```

### Середній рівень (з'єднання таблиць, групування, агрегатні функції)

1. **Шаблон**: "Порахувати [агрегатну інформацію] для [умова з декількох таблиць]"
   - Приклад: "Порахувати кількість відвідувань для кожного члена клубу за останній місяць"
   - SQL:
   ```sql
   SELECT ч.прізвище, ч.ім'я, COUNT(в.id) AS кількість_відвідувань
   FROM члени_клубу ч
   JOIN відвідування в ON ч.id = в.член_клубу_id
   WHERE в.дата >= DATE('now', '-1 month')
   GROUP BY ч.id
   ```

2. **Шаблон**: "Знайти [інформацію], де [складні умови з HAVING]"
   - Приклад: "Знайти тренерів, які провели більше 20 персональних тренувань цього місяця"
   - SQL:
   ```sql
   SELECT т.прізвище, т.ім'я, COUNT(п.id) AS кількість_тренувань
   FROM тренери т
   JOIN персональні_тренування п ON т.id = п.тренер_id
   WHERE EXTRACT(MONTH FROM п.дата) = EXTRACT(MONTH FROM CURRENT_DATE)
   GROUP BY т.id
   HAVING COUNT(п.id) > 20
   ```

### Складний рівень (підзапити, віконні функції, складні умови)

1. **Шаблон**: "Знайти [інформацію], яка [складна умова з підзапитом]"
   - Приклад: "Знайти членів клубу, які відвідували всі типи групових занять"
   - SQL:
   ```sql
   SELECT ч.прізвище, ч.ім'я
   FROM члени_клубу ч
   WHERE NOT EXISTS (
       SELECT г.тип_заняття_id
       FROM групові_заняття г
       WHERE NOT EXISTS (
           SELECT 1
           FROM відвідування в
           WHERE в.член_клубу_id = ч.id
           AND в.заняття_id = г.id
       )
   )
   ```

2. **Шаблон**: "Показати [інформацію з віконними функціями]"
   - Приклад: "Показати топ-3 найбільш відвідуваних групових занять для кожного місяця цього року"
   - SQL:
   ```sql
   WITH рейтинг_занять AS (
       SELECT 
           г.назва, 
           EXTRACT(MONTH FROM в.дата) AS місяць,
           COUNT(*) AS кількість,
           ROW_NUMBER() OVER (PARTITION BY EXTRACT(MONTH FROM в.дата) ORDER BY COUNT(*) DESC) AS рейтинг
       FROM групові_заняття г
       JOIN відвідування в ON г.id = в.заняття_id
       WHERE EXTRACT(YEAR FROM в.дата) = EXTRACT(YEAR FROM CURRENT_DATE)
       GROUP BY г.id, EXTRACT(MONTH FROM в.дата)
   )
   SELECT назва, місяць, кількість
   FROM рейтинг_занять
   WHERE рейтинг <= 3
   ORDER BY місяць, рейтинг
   ```

## Приклади питань для бази "Лікарня"

### Простий рівень

1. **Шаблон**: "Хто з [тип особи] [умова]?"
   - Приклад: "Хто з лікарів спеціалізується на кардіології?"
   - SQL:
   ```sql
   SELECT прізвище, ім'я, по_батькові 
   FROM лікарі 
   WHERE спеціалізація = 'Кардіологія'
   ```

2. **Шаблон**: "Коли [подія] [умова]?"
   - Приклад: "Коли пацієнт Іванов був госпіталізований останнього разу?"
   - SQL:
   ```sql
   SELECT дата_госпіталізації 
   FROM госпіталізації 
   WHERE пацієнт_id = (SELECT id FROM пацієнти WHERE прізвище = 'Іванов') 
   ORDER BY дата_госпіталізації DESC 
   LIMIT 1
   ```

### Середній рівень

1. **Шаблон**: "Скільки [агрегатна інформація] для [умова з декількох таблиць]?"
   - Приклад: "Скільки пацієнтів було у кожного лікаря за останній квартал?"
   - SQL:
   ```sql
   SELECT л.прізвище, л.ім'я, COUNT(DISTINCT п.id) AS кількість_пацієнтів
   FROM лікарі л
   JOIN прийоми п ON л.id = п.лікар_id
   WHERE п.дата >= DATE('now', '-3 month')
   GROUP BY л.id
   ```

2. **Шаблон**: "Яка [агрегатна статистика] для [умова]?"
   - Приклад: "Яка середня тривалість госпіталізації для кожного відділення?"
   - SQL:
   ```sql
   SELECT в.назва, AVG(JULIANDAY(г.дата_виписки) - JULIANDAY(г.дата_госпіталізації)) AS середня_тривалість
   FROM відділення в
   JOIN госпіталізації г ON в.id = г.відділення_id
   WHERE г.дата_виписки IS NOT NULL
   GROUP BY в.id
   ```

### Складний рівень

1. **Шаблон**: "Знайти [інформацію], що має [складна умова з підзапитом і віконними функціями]"
   - Приклад: "Знайти лікарів, які мали більше пацієнтів, ніж середня кількість пацієнтів по їх відділенню"
   - SQL:
   ```sql
   WITH статистика_лікарів AS (
       SELECT 
           л.id AS лікар_id, 
           л.прізвище, 
           л.ім'я,
           в.id AS відділення_id,
           в.назва AS відділення,
           COUNT(DISTINCT п.пацієнт_id) AS кількість_пацієнтів,
           AVG(COUNT(DISTINCT п.пацієнт_id)) OVER (PARTITION BY в.id) AS середня_по_відділенню
       FROM лікарі л
       JOIN відділення в ON л.відділення_id = в.id
       JOIN прийоми п ON л.id = п.лікар_id
       GROUP BY л.id
   )
   SELECT прізвище, ім'я, відділення, кількість_пацієнтів, середня_по_відділенню
   FROM статистика_лікарів
   WHERE кількість_пацієнтів > середня_по_відділенню
   ```

## Схема роботи з шаблонами

1. **Аналіз схеми** - вивчіть структуру бази даних: таблиці, зв'язки, обмеження
2. **Вибір шаблону** - оберіть відповідний шаблон для потрібної складності
3. **Адаптація питання** - адаптуйте шаблон відповідно до конкретного домену
4. **Написання SQL** - створіть SQL-запит, який відповідає на питання
5. **Тестування** - перевірте запит на тестових даних
6. **Документування** - додайте питання та запит до набору даних

## Рекомендації для кожного домену

### Спортивний клуб
- Зосередьтеся на питаннях про відвідуваність, популярність занять, завантаженість тренерів
- Для складних запитів використовуйте аналіз тенденцій, рейтинги, порівняння періодів

### Лікарня
- Акцент на статистиці пацієнтів, ефективності лікарів, завантаженості відділень
- Для складних запитів: аналіз тривалості лікування, ефективності процедур, вартості послуг

### Університет
- Питання про успішність студентів, рейтинги викладачів, популярність курсів
- Складні запити: аналіз динаміки успішності, порівняння факультетів, прогнозування стипендій

### Інтернет-магазин
- Статистика продажів, популярність товарів, активність клієнтів
- Складні запити: аналіз кошика, перехресні продажі, сезонні тенденції

## Прогрес створення шаблонів питань

### Загальний прогрес
![Загальний прогрес](https://progress-bar.dev/60/?width=300&title=Шаблони)

### Прогрес по базах даних

| База даних | Простий рівень | Середній рівень | Складний рівень | Загальний прогрес |
|------------|---------------|----------------|-----------------|------------------|
| Спортивний клуб | 5/5 | 5/5 | 4/5 | ![Прогрес](https://progress-bar.dev/93/?width=150) |
| Лікарня | 5/5 | 5/5 | 3/5 | ![Прогрес](https://progress-bar.dev/87/?width=150) |
| Університет | 5/5 | 3/5 | 1/5 | ![Прогрес](https://progress-bar.dev/60/?width=150) |
| Інтернет-магазин | 5/5 | 2/5 | 1/5 | ![Прогрес](https://progress-bar.dev/53/?width=150) |
| Бібліотека | 5/5 | 2/5 | 0/5 | ![Прогрес](https://progress-bar.dev/47/?width=150) |
| Туристичне агентство | 5/5 | 0/5 | 0/5 | ![Прогрес](https://progress-bar.dev/33/?width=150) |
| Ресторан | 5/5 | 0/5 | 0/5 | ![Прогрес](https://progress-bar.dev/33/?width=150) |
| Авіакомпанія | 4/5 | 0/5 | 0/5 | ![Прогрес](https://progress-bar.dev/27/?width=150) |

### Візуалізація прогресу по рівнях складності

```
Простий рівень    [==============================>] 98%
Середній рівень   [=============>                 ] 53%
Складний рівень   [=====>                         ] 23%
--------------------------------------------------
ЗАГАЛОМ           [===============>               ] 60%
```

### Пріоритети для подальшої роботи
1. ⚠️ Створення шаблонів складного рівня для всіх баз даних
2. ⚠️ Завершення шаблонів середнього рівня для Туристичного агентства, Ресторану та Авіакомпанії
3. ✅ Завершити шаблони простого рівня для Авіакомпанії 